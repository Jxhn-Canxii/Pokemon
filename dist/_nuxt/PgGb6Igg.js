import{_ as R,V}from"./BgMq0hds.js";import{_ as T}from"./BTZhcGdv.js";import{_ as j,a as O,b as z}from"./BtdaXWqS.js";import{_ as G}from"./BXf6iyTY.js";import{_ as L}from"./CLSZbrfm.js";import{_ as W}from"./7bhDg-qu.js";import{r as g,c as i,b as o,w as s,o as d,d as b,i as q,a as k,h as c,n as v,t as u}from"./C3f4aPB-.js";import{a as y,B as U,h as w,F as H,A as J}from"./CcP0DOW9.js";import"./o7ON5bpy.js";import"./CMuC9vtR.js";import"./CUORWU_8.js";const K={class:"space-y-6 p-4 overflow-auto"},Q={key:0,class:"text-red-500 text-sm mt-1"},X={key:0,class:"text-red-500 text-sm mt-1"},Y={key:0,class:"text-red-500 text-sm mt-1"},Z={key:0,class:"text-red-500 text-sm mt-1"},ee={key:0,class:"text-red-500 text-sm mt-1"},ae={class:"flex justify-end"},_e={__name:"EditParking",props:{data:Object},emits:["transaction_id"],setup(E,{emit:P}){const B=P,A=E,m=g(!1),f=g([]),r=g({parking_name:"",price:0,area:0,remarks:"",building_id:0}),a=g({}),$=()=>{m.value=!0,x(),F(),C()},C=async()=>{try{const l=await y.get(`${V}buildings/dropdown`,U());f.value=l.data.buildings}catch(l){w(l)}},F=()=>{const l=A.data;r.value={parking_id:l.id,parking_name:l.name,price:l.price,area:l.area,remarks:l.remarks,building_id:l.buildingId}},x=()=>{r.value={parking_name:"",price:0,area:0,remarks:"",building_id:""},a.value={}},N=async()=>{var l,e;try{a.value={};const n=H(r.value),p=await y.post(`${V}parkings/edit`,n,U());await J("success","Success",p.data.message),x(),m.value=!1,B("transaction_id",Math.random())}catch(n){(e=(l=n.response)==null?void 0:l.data)!=null&&e.errors?a.value=n.response.data.errors:w(n)}};return(l,e)=>{const n=R,p=T,_=z,S=G,M=L,h=O,D=W,I=j;return d(),i("div",null,[o(n,{icon:"i-heroicons-pencil",color:"yellow",onClick:e[0]||(e[0]=t=>$())},{default:s(()=>e[8]||(e[8]=[b(" Edit ")])),_:1}),o(I,{show:m.value,"onUpdate:show":e[6]||(e[6]=t=>m.value=t),title:"Edit Parking",onClose:e[7]||(e[7]=t=>m.value=!1),maxWidth:"xl"},{default:s(()=>[o(D,null,{default:s(()=>[o(h,{onSubmit:q(N,["prevent"])},{default:s(()=>[k("div",K,[e[10]||(e[10]=k("h3",{class:"text-lg font-semibold"},"Edit Parking",-1)),e[11]||(e[11]=k("hr",null,null,-1)),o(_,{label:"Parking Name"},{default:s(()=>[o(p,{modelValue:r.value.parking_name,"onUpdate:modelValue":e[1]||(e[1]=t=>r.value.parking_name=t),placeholder:"Enter Parking Name",disabled:"",class:v(["bg-gray-200",{"border-red-500":a.value.parking_name}])},null,8,["modelValue","class"]),a.value.parking_name?(d(),i("p",Q,u(a.value.parking_name[0]),1)):c("",!0)]),_:1}),o(_,{label:"Building"},{default:s(()=>[o(S,{modelValue:r.value.building_id,"onUpdate:modelValue":e[2]||(e[2]=t=>r.value.building_id=t),options:f.value,placeholder:"Select Building",class:v({"border-red-500":a.value.building_id})},{option:s(({option:t})=>[b(u(t.label),1)]),_:1},8,["modelValue","options","class"]),a.value.building_id?(d(),i("p",X,u(a.value.building_id[0]),1)):c("",!0)]),_:1}),o(_,{label:"Area"},{default:s(()=>[o(p,{modelValue:r.value.area,"onUpdate:modelValue":e[3]||(e[3]=t=>r.value.area=t),type:"number",placeholder:"Enter Area",class:v({"border-red-500":a.value.area})},null,8,["modelValue","class"]),a.value.area?(d(),i("p",Y,u(a.value.area[0]),1)):c("",!0)]),_:1}),o(_,{label:"Price"},{default:s(()=>[o(p,{modelValue:r.value.price,"onUpdate:modelValue":e[4]||(e[4]=t=>r.value.price=t),type:"number",placeholder:"Enter Price",class:v({"border-red-500":a.value.price})},null,8,["modelValue","class"]),a.value.price?(d(),i("p",Z,u(a.value.price[0]),1)):c("",!0)]),_:1}),o(_,{label:"Remarks"},{default:s(()=>[o(M,{modelValue:r.value.remarks,"onUpdate:modelValue":e[5]||(e[5]=t=>r.value.remarks=t),placeholder:"Enter Remarks",class:v({"border-red-500":a.value.remarks})},null,8,["modelValue","class"]),a.value.remarks?(d(),i("p",ee,u(a.value.remarks[0]),1)):c("",!0)]),_:1}),k("div",ae,[o(n,{type:"submit",color:"blue"},{default:s(()=>e[9]||(e[9]=[b(" Save ")])),_:1})])])]),_:1})]),_:1})]),_:1},8,["show"])])}}};export{_e as default};
