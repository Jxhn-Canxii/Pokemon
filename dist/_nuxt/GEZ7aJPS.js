import{_ as O,V as B}from"./BgMq0hds.js";import{_ as P}from"./BTZhcGdv.js";import{_ as T,a as j,b as I}from"./BtdaXWqS.js";import{_ as z}from"./BXf6iyTY.js";import{_ as G}from"./CLSZbrfm.js";import{_ as L}from"./7bhDg-qu.js";import{r as c,c as u,b as t,w as n,o as i,d as g,i as R,a as f,h as b,n as v,t as m}from"./C3f4aPB-.js";import{a as U,B as A,h as w,A as W}from"./CcP0DOW9.js";import"./o7ON5bpy.js";import"./CMuC9vtR.js";import"./CUORWU_8.js";const q={class:"space-y-4 p-4 overflow-auto"},H={key:0,class:"text-red-500 text-sm mt-1"},J={key:0,class:"text-red-500 text-sm mt-1"},K={key:0,class:"text-red-500 text-sm mt-1"},Q={key:0,class:"text-red-500 text-sm mt-1"},X={key:0,class:"text-red-500 text-sm mt-1"},Y={class:"flex justify-end mt-6"},me={__name:"AddBuilding",emits:["transaction_id"],setup(Z,{emit:C}){const k=C,_=c(!1),x=c([]),y=c([]),l=c({building_name:"",address:"",contact:"",building_abbre:"",our_company_id:0}),o=c({}),E=()=>{_.value=!0,V(),$()},$=async()=>{try{const r=await U.get(`${B}our-companies/dropdown`,A());y.value=r.data.ourCompanies}catch(r){w(r)}},V=()=>{l.value={building_name:"",address:"",contact:"",building_abbre:"",our_company_id:0},x.value=[],o.value={}},N=async()=>{var r,e;try{o.value={};const s=new FormData;Object.keys(l.value).forEach(d=>{s.append(d,l.value[d])}),x.value.forEach(d=>{s.append("our_company_images[]",d)});const p=await U.post(`${B}buildings/add`,s,A());await W("success","Success",p.data.message),V(),_.value=!1,k("transaction_id",Math.random())}catch(s){(e=(r=s.response)==null?void 0:r.data)!=null&&e.errors?o.value=s.response.data.errors:w(s)}};return(r,e)=>{const s=O,p=P,d=I,h=z,F=G,M=j,S=L,D=T;return i(),u("div",null,[t(s,{icon:"i-heroicons-plus",color:"blue",onClick:e[0]||(e[0]=a=>E())},{default:n(()=>e[8]||(e[8]=[g(" Add Building ")])),_:1}),t(D,{show:_.value,"onUpdate:show":e[6]||(e[6]=a=>_.value=a),title:"Add Building",onClose:e[7]||(e[7]=a=>_.value=!1),maxWidth:"2xl"},{default:n(()=>[t(S,null,{default:n(()=>[t(M,{onSubmit:R(N,["prevent"])},{default:n(()=>[f("div",q,[e[10]||(e[10]=f("h3",{class:"text-lg font-semibold"},"Add Building",-1)),e[11]||(e[11]=f("hr",null,null,-1)),t(d,{label:"Building Name"},{default:n(()=>[t(p,{modelValue:l.value.building_name,"onUpdate:modelValue":e[1]||(e[1]=a=>l.value.building_name=a),placeholder:"Enter Building Name",class:v({"border-red-500":o.value.building_name})},null,8,["modelValue","class"]),o.value.building_name?(i(),u("p",H,m(o.value.building_name[0]),1)):b("",!0)]),_:1}),t(d,{label:"Building Abbreviation"},{default:n(()=>[t(p,{modelValue:l.value.building_abbre,"onUpdate:modelValue":e[2]||(e[2]=a=>l.value.building_abbre=a),placeholder:"Enter Building Abbreviation",class:v({"border-red-500":o.value.building_abbre})},null,8,["modelValue","class"]),o.value.building_abbre?(i(),u("p",J,m(o.value.building_abbre[0]),1)):b("",!0)]),_:1}),t(d,{label:"Company"},{default:n(()=>[t(h,{modelValue:l.value.our_company_id,"onUpdate:modelValue":e[3]||(e[3]=a=>l.value.our_company_id=a),options:y.value,class:v({"border-red-500":o.value.our_company_id})},{option:n(({option:a})=>[g(m(a.name),1)]),_:1},8,["modelValue","options","class"]),o.value.our_company_id?(i(),u("p",K,m(o.value.our_company_id[0]),1)):b("",!0)]),_:1}),t(d,{label:"Address"},{default:n(()=>[t(F,{modelValue:l.value.address,"onUpdate:modelValue":e[4]||(e[4]=a=>l.value.address=a),placeholder:"Enter Address",class:v({"border-red-500":o.value.address})},null,8,["modelValue","class"]),o.value.address?(i(),u("p",Q,m(o.value.address[0]),1)):b("",!0)]),_:1}),t(d,{label:"Contact"},{default:n(()=>[t(p,{modelValue:l.value.contact,"onUpdate:modelValue":e[5]||(e[5]=a=>l.value.contact=a),placeholder:"Enter Contact",class:v({"border-red-500":o.value.contact})},null,8,["modelValue","class"]),o.value.contact?(i(),u("p",X,m(o.value.contact[0]),1)):b("",!0)]),_:1}),f("div",Y,[t(s,{type:"submit",color:"blue"},{default:n(()=>e[9]||(e[9]=[g(" Submit ")])),_:1})])])]),_:1})]),_:1})]),_:1},8,["show"])])}}};export{me as default};
